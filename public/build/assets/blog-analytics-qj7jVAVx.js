document.addEventListener("DOMContentLoaded",function(){let o=null;window.firebaseAnalytics&&(o=window.firebaseAnalytics);let t={blogId:null,blogTitle:null,category:null,startTime:null,endTime:null,readProgress:0,timeSpent:0};function y(){var n,a,u;if(document.querySelector(".blog-content, .article-content, .post-content")){const f=((n=document.querySelector("h1, h2"))==null?void 0:n.textContent)||"Unknown Blog",r=((a=document.querySelector("[data-blog-id]"))==null?void 0:a.getAttribute("data-blog-id"))||null,c=((u=document.querySelector("[data-category]"))==null?void 0:u.getAttribute("data-category"))||null;t.blogTitle=f,t.blogId=r,t.category=c,t.startTime=new Date,o&&(o.trackBlogInteraction("blog_viewed",r,c),o.trackUserEngagement("blog_session_start",{blog_title:f,blog_id:r,category:c,timestamp:t.startTime.toISOString()}))}}function _(e){o&&e>t.readProgress&&(t.readProgress=e,o.trackUserEngagement("blog_reading_progress",{blog_title:t.blogTitle,blog_id:t.blogId,progress_percentage:e,category:t.category}))}function i(e){o&&(o.trackBlogInteraction("blog_shared",t.blogId,t.category),o.trackUserEngagement("blog_share",{blog_title:t.blogTitle,blog_id:t.blogId,share_method:e,category:t.category}))}function g(e){o&&(o.trackBlogInteraction(`blog_${e}`,t.blogId,t.category),o.trackUserEngagement("blog_bookmark",{blog_title:t.blogTitle,blog_id:t.blogId,action:e,category:t.category}))}function l(e){o&&o.trackUserEngagement("blog_comment",{blog_title:t.blogTitle,blog_id:t.blogId,action:e,category:t.category})}function s(e,n){o&&(o.trackSearch(e,n),o.trackUserEngagement("blog_search",{search_term:e,results_count:n,category:t.category}))}function d(e){o&&o.trackUserEngagement("blog_category_filter",{category:e,page_name:window.location.pathname})}function k(){if(o){const e=new Date,n=(e-t.startTime)/1e3;o.trackBlogInteraction("blog_completed",t.blogId,t.category),o.trackUserEngagement("blog_completion",{blog_title:t.blogTitle,blog_id:t.blogId,category:t.category,time_spent_seconds:n,read_progress:t.readProgress,timestamp:e.toISOString()})}}function b(){if(o){const e=new Date,n=(e-t.startTime)/1e3;o.trackBlogInteraction("blog_abandoned",t.blogId,t.category),o.trackUserEngagement("blog_abandonment",{blog_title:t.blogTitle,blog_id:t.blogId,category:t.category,time_spent_seconds:n,read_progress:t.readProgress,timestamp:e.toISOString()})}}y(),window.addEventListener("scroll",function(){}),window.addEventListener("beforeunload",function(){t.startTime&&!t.endTime&&b()}),document.addEventListener("click",function(e){const n=e.target.closest("[data-share]");if(n){const a=n.getAttribute("data-share");i(a)}}),document.addEventListener("click",function(e){const n=e.target.closest("[data-bookmark]");if(n){const a=n.getAttribute("data-bookmark");g(a)}}),document.addEventListener("click",function(e){const n=e.target.closest("[data-comment-action]");if(n){const a=n.getAttribute("data-comment-action");l(a)}});const m=document.querySelector("form[data-search]");m&&m.addEventListener("submit",function(e){const n=this.querySelector('input[type="search"], input[name="search"]');if(n){const a=n.value.trim();a&&s(a,0)}}),document.addEventListener("click",function(e){const n=e.target.closest("[data-category-filter]");if(n){const a=n.getAttribute("data-category-filter");d(a)}}),window.blogAnalytics={trackReadingProgress:_,trackBlogShare:i,trackBlogBookmark:g,trackBlogComment:l,trackBlogSearch:s,trackCategoryFilter:d,trackBlogCompletion:k,trackBlogAbandonment:b,blogState:t}});
